(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,t,a){e.exports=a(248)},248:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(54),l=a.n(c),o=a(14),i=a(25),s=a(7),m=a(12),u=a.n(m),d=a(20),p=a.n(d),h=a(113),f=a.n(h),E=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){var r=f.a.v4();n({type:"SET_ALERT",payload:{msg:e,alertType:t,id:r}}),setTimeout((function(){return n({type:"REMOVE_ALERT",payload:r})}),a)}},v=function(e){e?p.a.defaults.headers.common.Authorization=e:delete p.a.defaults.headers.common.Authorization},g=function(){return function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return localStorage.token&&v(localStorage.token),a.prev=1,a.next=4,u.a.awrap(p.a.get("/api/users/me"));case 4:t=a.sent,e({type:"USER_LOADED",payload:t.data}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),e({type:"AUTH_ERROR"});case 11:case"end":return a.stop()}}),null,null,[[1,8]])}},y=Object(s.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){e({type:"LOGOUT"})}}})((function(e){var t=e.auth,a=t.isAuthenticated,c=t.loading,l=e.logout,i=r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item "},r.a.createElement(o.b,{className:"nav-link text-danger ",to:"/deletecompany"},"Delete Edit Company")),r.a.createElement("li",{className:"nav-item "},r.a.createElement(o.b,{className:"nav-link text-success",to:"/addCompany"},"Add New Company")),r.a.createElement("li",{className:"nav-item "},r.a.createElement(o.b,{className:"nav-link ",to:"/dashboard"},"Search Bar")),r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link text-secondary",onClick:l,href:"#!"},"Logout"))),s=r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{className:"nav-link active",to:"/login"},"Login")));return r.a.createElement("div",{className:"container"},r.a.createElement("nav",{className:"navbar navbar-dark bg-light"},r.a.createElement("span",{className:"badge badge-danger text-wrap"},r.a.createElement("h3",null,r.a.createElement("i",{className:"nav-link",href:"#!"}," Den Gode by-Post Mail"))),!c&&r.a.createElement(n.Fragment,null,a?i:s)))})),b=a(31),N=a(19),O=a(57),w=Object(s.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(a){var n,r,c,l;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n={headers:{"Content-Type":"application/json"}},r=JSON.stringify({email:e,password:t}),o.prev=2,o.next=5,u.a.awrap(p.a.post("/api/users/login",r,n));case 5:c=o.sent,a({type:"LOGIN_SUCCESS",payload:c.data}),a(g()),o.next=15;break;case 10:o.prev=10,o.t0=o.catch(2),(l=o.t0.response.data.errors)&&l.forEach((function(e){return a(E(e.msg,"danger"))})),a({type:"LOGIN_FAIL"});case 15:case"end":return o.stop()}}),null,null,[[2,10]])}}})((function(e){var t=e.login,a=e.isAuthenticated,c=Object(n.useState)({email:"",password:""}),l=Object(O.a)(c,2),o=l[0],s=l[1],m=o.email,d=o.password,p=function(e){return s(Object(N.a)({},o,Object(b.a)({},e.target.name,e.target.value)))};return a?r.a.createElement(i.a,{to:"/dashboard"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:" mx-auto",style:{width:"400px",marginTop:"8%"}},r.a.createElement("h1",{className:"large text-primary"},"Sign In"),r.a.createElement("form",{onSubmit:function(e){return function(e){return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:e.preventDefault(),t(m,d);case 2:case"end":return a.stop()}}))}(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"email",placeholder:"Email Address",name:"email",value:m,onChange:function(e){return p(e)},required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"password",placeholder:"Password",name:"password",value:d,onChange:function(e){return p(e)}})),r.a.createElement("input",{type:"submit",className:"btn btn-primary ",value:"Login"}))))})),j=Object(s.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:E,register:function(e){var t=e.name,a=e.email,n=e.password;return function(e){var r,c,l,o;return u.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({name:t,email:a,password:n}),i.prev=2,i.next=5,u.a.awrap(p.a.post("/api/users",c,r));case 5:l=i.sent,e({type:"REGISTER_SUCCESS",payload:l.data}),e(g()),i.next=15;break;case 10:i.prev=10,i.t0=i.catch(2),(o=i.t0.response.data.errors)&&o.forEach((function(t){return e(E(t.msg,"danger"))})),e({type:"REGISTER_FAIL"});case 15:case"end":return i.stop()}}),null,null,[[2,10]])}}})((function(e){var t=e.setAlert,a=e.register,c=e.isAuthenticated,l=Object(n.useState)({name:"",email:"",password:"",password2:""}),s=Object(O.a)(l,2),m=s[0],d=s[1],p=m.name,h=m.email,f=m.password,E=m.password2,v=function(e){return d(Object(N.a)({},m,Object(b.a)({},e.target.name,e.target.value)))};return c?r.a.createElement(i.a,{to:"/dashboard"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"large text-primary"},"Sign Up"),r.a.createElement("p",{className:"lead"},r.a.createElement("i",{className:"fas fa-user"})," Create Your Account"),r.a.createElement("form",{className:"form",onSubmit:function(e){return function(e){return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e.preventDefault(),f!==E?t("Passwords do not match","danger"):a({name:p,email:h,password:f});case 2:case"end":return n.stop()}}))}(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",value:p,onChange:function(e){return v(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",placeholder:"Email Address",name:"email",value:h,onChange:function(e){return v(e)}}),r.a.createElement("small",{className:"form-text"},"This site uses Gravatar so if you want a profile image, use a Gravatar email")),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:f,onChange:function(e){return v(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Confirm Password",name:"password2",value:E,onChange:function(e){return v(e)}})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Register"})),r.a.createElement("p",{className:"my-1"},"Already have an account? ",r.a.createElement(o.b,{to:"/login"},"Sign In"))))})),S=Object(s.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return r.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.alertType)},e.msg)}))})),C=a(32),k=a(33),x=a(39),A=a(35),L=a(34),T=a(38),R=a(26),I=a.n(R),_=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(x.a)(this,Object(A.a)(t).call(this,e))).filterList=function(e){console.log("this is a filter!");var t="/api/company/"+e.target.value;fetch(t).then((function(e){return e.json()})).then((function(e){a.setState({isLoaded:!0,items:e})}))},a.sendEmail=function(e,t){var a="/api/company/"+t;console.log("sending email: "+t),fetch(a,{method:"POST",body:"yoo"})},a.state={items:[],isLoaded:!1},a.sweetalertfunction=a.sweetalertfunction.bind(Object(L.a)(a)),a}return Object(T.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/company").then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,items:t})}))}},{key:"sweetalertfunction",value:function(e,t){var a=this;I()({text:"Send email til ".concat(t.name," "),buttons:!0,dangerMode:!1}).then((function(n){n?(a.sendEmail(e,t._id),I()("Emailen er nu sendt afsted til ".concat(t.name),{icon:"success"})):I()("Emailen blev ikke sendt")}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoaded,n=t.items;return a?r.a.createElement("div",{className:"container ",style:{width:"600px",marginTop:"8%"}},r.a.createElement("input",{className:"form-control focusedInput",id:"myInput",type:"text",placeholder:"Search name Here",onChange:this.filterList,style:{marginBottom:"2%"}}),r.a.createElement("div",null,n.map((function(t){return r.a.createElement("div",{key:t._id},r.a.createElement("ul",{className:"list-group",id:"myList"},r.a.createElement("li",{className:"list-group-item list-group-item-secondary"},r.a.createElement("a",{href:"#!",onClick:function(a){return e.sweetalertfunction(a,t)}},r.a.createElement("h5",null,t.name," ")))))})))):r.a.createElement("div",null,"is Loading")}}]),t}(n.Component),D=a(115),G=Object(s.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=a.isAuthenticated,c=a.loading,l=Object(D.a)(e,["component","auth"]);return r.a.createElement(i.b,Object.assign({},l,{render:function(e){return n||c?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/login"})}}))})),F=a(250),U=a(249),M=function(e){function t(){return Object(C.a)(this,t),Object(x.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(k.a)(t,[{key:"renderField",value:function(e){var t=e.meta,a=t.touched,n=t.error,c=" ".concat(a&&n?"text-danger":"");return r.a.createElement("div",{className:c},r.a.createElement("label",null,e.label),r.a.createElement("input",Object.assign({className:"form-control",placeholder:e.placeholder,name:e.name,type:e.type},e.input)),a?n:"")}},{key:"onSubmit",value:function(e){var t=this;this.props.addCompany(e,(function(){t.props.history.push("/")}))}},{key:"render",value:function(){var e=this.props.handleSubmit;return r.a.createElement("div",{className:" mx-auto",style:{width:"400px",marginTop:"8%"}},r.a.createElement("h3",null,"Add New Company"),r.a.createElement("form",{onSubmit:e(this.onSubmit.bind(this))},r.a.createElement(F.a,{placeholder:"Enter Name",name:"name",type:"name",component:this.renderField}),r.a.createElement(F.a,{placeholder:"Enter Email",name:"email",type:"email",component:this.renderField}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save"),r.a.createElement(o.b,{style:{margin:"0.5rem"},to:"/dashboard",className:"btn btn-danger"},"Cancel")))}}]),t}(n.Component),P=Object(U.a)({validate:function(e){var t={};return e.name||(t.name="Enter a name please"),e.email||(t.email="Enter Email please"),t},form:"addNewCompany"})(Object(s.b)(null,{addCompany:function(e,t){return{type:"add_company",payload:p.a.post("/api/company",e).then((function(){return t()}))}}})(M)),B=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(x.a)(this,Object(A.a)(t).call(this,e))).filterList=function(e){console.log("this is a filter!");var t="/api/company/"+e.target.value;fetch(t).then((function(e){return e.json()})).then((function(e){a.setState({isLoaded:!0,items:e})}))},a.deleteCompany=function(e,t){fetch("/api/company/"+t,{method:"DELETE"}).then((function(e){return e.json()})).then(a.props.history.push("/dashboard"))},a.sweetalertfunction=function(e,t){I()({text:"Delete ".concat(t.name," "),buttons:!0,dangerMode:!0}).then((function(n){n?(a.deleteCompany(e,t._id),I()("Company has been deleted ",{icon:"success"})):I()("It canceled")}))},a.state={items:[],isLoaded:!1},a.sweetalertfunction=a.sweetalertfunction.bind(Object(L.a)(a)),a}return Object(T.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/company").then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,items:t})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoaded,n=t.items;return a||n?r.a.createElement("div",{className:"container ",style:{width:"600px",marginTop:"8%"}},r.a.createElement("input",{className:"form-control focusedInput",id:"myInput",type:"text",placeholder:"Search name Here to delete",onChange:this.filterList,style:{marginBottom:"8%"}}),r.a.createElement("div",null,n.map((function(t){return r.a.createElement("div",{key:t._id},r.a.createElement("ul",{className:"list-group",id:"myList"},r.a.createElement("li",{className:"list-group-item list-group-item-danger"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("h5",null,"name:",t.name,", email: ",t.email)),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("button",{className:"btn btn-danger",onClick:function(a){return e.sweetalertfunction(a,t)}},"Delete"))))))})))):r.a.createElement("div",null,"is Loading")}}]),t}(n.Component),H=a(6),J=a(117),z=a(118),V=a(119),Y=[],q={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},W=a(251),K={companies:[],company:null,loading:!0},Q=Object(H.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ALERT":return[].concat(Object(V.a)(e),[n]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==n}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER_LOADED":return Object(N.a)({},e,{isAuthenticated:!0,loading:!1,user:n});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",n.token),Object(N.a)({},e,{},n,{isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":return localStorage.removeItem("token"),Object(N.a)({},e,{token:null,isAuthenticated:!1,loading:!1});default:return e}},form:W.a,company:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_COMPANY":return Object(N.a)({},e,{companies:n,loading:!1});default:return e}}}),X=[z.a],Z=Object(H.createStore)(Q,{},Object(J.composeWithDevTools)(H.applyMiddleware.apply(void 0,X)));localStorage.token&&v(localStorage.token);var $=function(){return Object(n.useEffect)((function(){Z.dispatch(g())}),[]),r.a.createElement(s.a,{store:Z},r.a.createElement(o.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(y,null),r.a.createElement(i.b,{exact:!0,path:"/",component:w}),r.a.createElement("section",{className:"container"},r.a.createElement(S,null),r.a.createElement(i.d,null,"const App = () => (",r.a.createElement(i.b,{exact:!0,path:"/login",component:w}),r.a.createElement(i.b,{exact:!0,path:"/Add New user ",component:j}),r.a.createElement(G,{exact:!0,path:"/dashboard",component:_}),r.a.createElement(G,{exact:!0,path:"/addCompany",component:P}),r.a.createElement(G,{exact:!0,path:"/deletecompany",component:B}))))))};l.a.render(r.a.createElement($,null),document.getElementById("root"))}},[[121,1,2]]]);
//# sourceMappingURL=main.5e298e44.chunk.js.map